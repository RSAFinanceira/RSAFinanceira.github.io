(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4095],{87165:function(e,t,n){Promise.resolve().then(n.bind(n,24110))},16463:function(e,t,n){"use strict";var s=n(71169);n.o(s,"useParams")&&n.d(t,{useParams:function(){return s.useParams}}),n.o(s,"usePathname")&&n.d(t,{usePathname:function(){return s.usePathname}}),n.o(s,"useRouter")&&n.d(t,{useRouter:function(){return s.useRouter}}),n.o(s,"useSearchParams")&&n.d(t,{useSearchParams:function(){return s.useSearchParams}})},24110:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var s=n(57437),i=n(16463),r=n(2265),a=n(54887);function o(e){let{name:t}=e,n=(0,r.useMemo)(()=>{if(!t)return"";let[e,n]=t.split(" ");return"".concat(e[0]).concat(n?n[0]:"")},[t]);return(0,s.jsx)("div",{className:"avatar",children:n})}n(32532),n(74933),n(98432);var l=n(87138),u=n(84481),c=n(60001),d=n(56889),m=n(31971);let h=[{id:"default",name:"",roles:["ADMIN","MASTER","TYPIST","VIEWER","MANAGER"]},{id:"fgts",name:"Antecipa\xe7\xe3o FGTS",modulePermission:u.SQ.FGTS,roles:["ADMIN","MASTER","TYPIST","VIEWER","MANAGER"]},{id:"credit-card",name:"Cart\xe3o de Cr\xe9dito",modulePermission:u.SQ.CC,roles:["ADMIN","MASTER","TYPIST","VIEWER","MANAGER"]},{id:"settings",name:"Configura\xe7\xf5es",roles:["ADMIN","MASTER"]},{id:"admin",name:"Administra\xe7\xe3o",roles:["ADMIN","MANAGER"]}],f=[{module:"default",name:"Dashboard",icon:"house",link:"/dashboard"},{module:"default",name:"Clientes",icon:"people",link:"/customers"},{module:"fgts",name:"Nova Proposta",icon:"file-earmark-plus",link:"/fgts/new",roles:["ADMIN","MANAGER","MASTER","TYPIST"]},{module:"fgts",name:"Propostas",icon:"files",link:"/fgts/proposals"},{module:"fgts",name:"Comiss\xf5es",icon:"coin",link:"/fgts/commissions",roles:["ADMIN","MANAGER","MASTER@isFinancial"]},{module:"credit-card",name:"Nova Proposta",icon:"file-earmark-plus",link:"/credit-card/new",roles:["ADMIN","MANAGER","MASTER","TYPIST"]},{module:"credit-card",name:"Propostas",icon:"files",link:"/credit-card/proposals"},{module:"settings",name:"Usu\xe1rios",icon:"person",link:"/users",roles:["ADMIN","MASTER"]},{module:"settings",name:"Tabelas",icon:"table",link:"/tables",roles:["MASTER@isFinancial"]},{module:"admin",name:"Aprova\xe7\xe3o Manual",icon:"check2-square",link:"/admin/manual-approval",roles:["ADMIN"]},{module:"admin",name:"Organiza\xe7\xf5es",icon:"building",link:"/admin/organizations",roles:["ADMIN","MANAGER"]},{module:"admin",name:"Desaverbar CPF",icon:"unlock",link:"/admin/unblock-reservation",roles:["ADMIN","MANAGER"]}];var p=e=>{var t,n,r,a,u,p,g;let{mobile:v,user:N}=e,x=(0,i.usePathname)(),A=async()=>{localStorage.clear(),window.location.href="/login"},E=()=>{let e=x;if(x.split("/").length>3){let t=x.split("/");t.pop(),e=t.join("/")}return e};return(0,s.jsxs)("div",{className:"sidebar d-flex flex-column justify-content-between ".concat(v?"mobile":""),children:[!v&&(0,s.jsx)("div",{className:"logo",children:(0,s.jsx)(l.default,{href:"/",children:(0,s.jsx)("img",{src:(null==N?void 0:N.group)?(null==N?void 0:null===(r=N.group)||void 0===r?void 0:r.logoUrl)?null==N?void 0:null===(p=N.group)||void 0===p?void 0:p.logoUrl:(null==N?void 0:null===(u=N.group)||void 0===u?void 0:null===(a=u.organization)||void 0===a?void 0:a.logoUrl)?null==N?void 0:null===(g=N.group)||void 0===g?void 0:g.organization.logoUrl:"/assets/images/logo.png":void 0,alt:"Logo",className:"cursor-pointer"})})}),(0,s.jsx)("div",{className:"flex-grow-1 ".concat(v?"":"mt-4"),children:(null==N?void 0:N.role)?h.filter(e=>!e.modulePermission||(0,c.B)(N,e.modulePermission)).filter(e=>!e.roles||e.roles.includes(null==N?void 0:N.role)||!1).map(e=>(0,s.jsxs)("div",{className:"sidebar__module",children:[e.name&&(0,s.jsx)("h6",{children:e.name}),(0,s.jsx)("ul",{className:"sidebar__menu",children:f.filter(t=>t.module===e.id).filter(e=>{var t;return!!(!e.roles||e.roles.includes(null==N?void 0:N.role)||e.roles.includes("".concat(null==N?void 0:N.role,"/").concat(null==N?void 0:null===(t=N.group)||void 0===t?void 0:t.name))||e.roles.includes("".concat(null==N?void 0:N.role,"@").concat((null==N?void 0:N.isFinancial)?"isFinancial":"isNotFinancial")))}).map(e=>(0,s.jsx)("li",{className:E()==e.link?"active":"",children:(0,s.jsxs)(l.default,{href:e.link,children:[(0,s.jsx)("i",{className:"bi bi-".concat(e.icon)}),(0,s.jsx)("span",{children:e.name})]})},e.name))})]},e.id)):(0,s.jsx)("div",{className:"sidebar__module",children:(0,s.jsxs)("ul",{className:"sidebar__menu",children:[(0,s.jsx)("li",{children:(0,s.jsx)("span",{className:"skeleton w-50"})}),(0,s.jsx)("li",{children:(0,s.jsx)("span",{className:"skeleton w-50"})})]})})}),N?(0,s.jsxs)("div",{className:"dropup d-none d-md-flex justify-content-between flex-column",children:[(0,s.jsx)("div",{className:"profile d-flex align-items-center justify-content-between dropdown-toggle cursor-pointer","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,s.jsxs)("div",{className:"flex-grow-1 d-flex",children:[(0,s.jsx)(o,{name:(null==N?void 0:N.name)||""}),(0,s.jsxs)("div",{className:"ms-2",children:[(0,s.jsx)("div",{className:"profile-name",children:null==N?void 0:N.name}),(0,s.jsx)("div",{className:"profile-email",children:(null==N?void 0:null===(t=N.group)||void 0===t?void 0:t.name)==="Principal"?null==N?void 0:N.group.organization.name:null==N?void 0:null===(n=N.group)||void 0===n?void 0:n.name})]})]})}),(0,s.jsxs)("ul",{className:"dropdown-menu",children:[(0,s.jsx)("li",{children:(0,s.jsxs)("div",{style:{paddingLeft:"15px",paddingBottom:"5px",paddingTop:"5px"},children:[(0,s.jsx)("div",{style:{width:"90px",marginBottom:"5px"},children:(0,s.jsx)(m.Z,{className:"bg-primary text-white",children:(0,d.O)(null==N?void 0:N.role)})}),(0,s.jsx)("span",{style:{fontSize:"12px"},children:N.email})]})}),(0,s.jsxs)("li",{children:[(0,s.jsx)(l.default,{className:"dropdown-item",href:"/my-profile",children:"Meu Perfil"}),(0,s.jsx)(l.default,{className:"dropdown-item",href:"#",onClick:()=>A(),children:"Sair"})]})]})]}):!v&&(0,s.jsxs)("div",{className:"ms-2 me-2 d-flex align-items-center justify-content-center",children:[(0,s.jsx)("div",{className:"skeleton rounded-circle",style:{width:"32px",height:"32px"}}),(0,s.jsxs)("div",{className:"flex-grow-1 ms-2",children:[(0,s.jsx)("span",{className:"skeleton w-100"}),(0,s.jsx)("span",{className:"skeleton w-100"})]})]})]})};function g(e){var t,n;let{user:a}=e,[u,c]=(0,r.useState)(!1),d=(0,i.usePathname)(),m=async()=>{localStorage.clear(),window.location.href="/login"};return(0,r.useEffect)(()=>{c(!1)},[d]),(0,s.jsxs)("div",{className:"",children:[(0,s.jsxs)("div",{className:"mobile-header d-flex flex-row justify-content-between align-items-center",children:[(0,s.jsx)("div",{className:"menu-button",onClick:()=>{c(!u)},children:(0,s.jsx)("i",{className:"bi bi-list"})}),(0,s.jsx)("div",{className:"logo",children:(0,s.jsx)(l.default,{href:"/",children:(null==a?void 0:null===(t=a.group)||void 0===t?void 0:t.organization)&&(0,s.jsx)("img",{src:(null==a?void 0:null===(n=a.group)||void 0===n?void 0:n.organization.logoUrl)||"/assets/images/logo.png",alt:"Logo",className:"cursor-pointer"})})}),(0,s.jsx)("div",{className:"flex-grow-1"}),(0,s.jsx)("div",{className:"profile d-flex align-items-center",children:(0,s.jsxs)("div",{className:"dropdown",children:[(0,s.jsx)("div",{className:"dropdown-toggle d-flex align-items-center justify-content-end cursor-pointer","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,s.jsx)(o,{name:(null==a?void 0:a.name)||""})}),(0,s.jsx)("ul",{className:"dropdown-menu",children:(0,s.jsx)("li",{children:(0,s.jsx)(l.default,{className:"dropdown-item",href:"#",onClick:()=>m(),children:"Sair"})})})]})})]}),u&&(0,s.jsx)(p,{mobile:!0,user:a})]})}n(85999);var v=n(90896);let N={default:"",success:"text-bg-success",warning:"text-bg-warning",error:"text-bg-danger"},x=()=>{let{message:e,type:t,delay:n=7,isShowing:i,hide:a}=(0,v.p)();return(0,r.useEffect)(()=>{let e;return i&&(e=setTimeout(()=>{a()},1e3*n)),()=>{e&&clearTimeout(e)}},[a,i,n]),(0,s.jsx)("div",{className:"toast-container position-fixed ".concat(i?"toast-active":""),children:(0,s.jsx)("div",{className:"toast align-items-center ".concat(i?"show":"hide"," ").concat(N[t]),role:"alert","aria-live":"assertive","aria-atomic":"true",children:(0,s.jsxs)("div",{className:"d-flex",children:[(0,s.jsx)("div",{className:"toast-body",children:e}),(0,s.jsx)("button",{type:"button",className:"btn-close me-2 m-auto","aria-label":"Close",onClick:a})]})})})};var A=n(25199);let E=()=>{let[e,t]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{t(!0)},[]),{isMounted:e}};var b=n(35260);function j(e){var t;let{children:n}=e,o=(0,i.useRouter)(),{user:l,setUser:u}=(0,r.useContext)(b.S),c=(0,i.usePathname)(),{isMounted:d}=E(),{data:m,isSuccess:h}=(0,A.po)({});return(0,r.useEffect)(()=>{(null==m?void 0:m.data)&&(u(m.data),localStorage.setItem("user",JSON.stringify(m.data)))},[null==m?void 0:m.data,u]),(0,r.useEffect)(()=>{var e;if(!localStorage.getItem("token")){o.push("/login");return}if(h&&!(null==m?void 0:null===(e=m.data)||void 0===e?void 0:e.cpf)){o.push("/login/finish-registration");return}"/"===c&&o.push("/dashboard")},[h,c,o,l,null==m?void 0:null===(t=m.data)||void 0===t?void 0:t.cpf]),(0,s.jsxs)("main",{className:"d-flex flex-md-row flex-column w-100",children:[(0,s.jsx)("div",{className:"d-none d-md-block",children:(0,s.jsx)(p,{user:l})}),(0,s.jsx)("div",{className:"d-flex d-md-none flex-column",children:(0,s.jsx)(g,{user:l})}),(0,s.jsx)("div",{className:"main-content flex-grow-1",children:n}),d&&(0,a.createPortal)((0,s.jsx)(x,{}),document.body)]})}},31971:function(e,t,n){"use strict";var s=n(57437);n(2265),n(78031),t.Z=e=>{let{children:t,className:n}=e;return(0,s.jsx)("div",{className:"badge-component ".concat(n),children:t})}},84481:function(e,t,n){"use strict";var s,i,r,a;n.d(t,{SQ:function(){return i},rS:function(){return l},vw:function(){return o}});let o={PENDING_CUSTOMER:"Coleta de Dados",PENDING_AUTHORIZATION:"Pendente Autoriza\xe7\xe3o",PENDING_ONBOARDING:"Coleta de Assinatura",PENDING_MANUAL_APPROVAL:"Pendente de aprova\xe7\xe3o manual",WAITING_PAYMENT:"Aguardando Pagamento",SUCCESFULL_PAYMENT:"Pagamento Realizado",PENDING:"Em An\xe1lise",ERROR:"Falha no Pagamento",REFUSED:"Reprovado (Polit. Interna)",CHARGEBACK:"Estornado",PENDING_ISSUE_SOLUTION:"Pend\xeancia",CANCELED:"Cancelada"},l={PENDING_CUSTOMER:"bg-primary text-white",WAITING_PAYMENT:"bg-warning text-black",SUCCESFULL_PAYMENT:"bg-success text-white",REFUSED:"bg-danger text-white",ERROR:"bg-danger text-white",PENDING:"bg-warning text-black",PENDING_AUTHORIZATION:"bg-warning text-black",PENDING_ONBOARDING:"bg-warning text-black",PENDING_MANUAL_APPROVAL:"bg-warning text-black",CHARGEBACK:"bg-danger text-white",PENDING_ISSUE_SOLUTION:"bg-warning text-black",CANCELED:"bg-danger text-white"};(r=s||(s={})).INITIAL="INITIAL",r.PENDING_APPROVAL="PENDING_APPROVAL",r.REFUSED="REFUSED",r.APPROVED="APPROVED",(a=i||(i={})).FGTS="FGTS",a.CC="CC"},25199:function(e,t,n){"use strict";n.d(t,{po:function(){return c},f0:function(){return o},cQ:function(){return m},b9:function(){return f}});var s=n(54899),i=n(78584),r=n(25524);let a=e=>s.ZP.post("auth/signin",{email:e.email,password:e.password,needMFA:!0}),o=e=>{let{config:t}=e;return(0,r.D)({onSuccess:()=>{i.E.invalidateQueries({queryKey:["auth"]})},...t,mutationFn:a})};var l=n(40932);let u=()=>s.ZP.get("auth/me"),c=e=>{let{config:t}=e;return(0,l.a)({...t,queryKey:["user"],queryFn:()=>u()})},d=e=>s.ZP.post("auth/mfa-signin",{email:e.email,password:e.password},{headers:{"x-mfa-code":e.mfaCode}}),m=e=>{let{config:t}=e;return(0,r.D)({onSuccess:()=>{i.E.invalidateQueries({queryKey:["auth"]})},...t,mutationFn:d})},h=e=>s.ZP.post("documents/mfa-signin",{mfaId:e.mfaId,customerCpf:e.customerCpf,customerId:e.customerId},{headers:{"x-mfa-code":e.mfaCode}}),f=e=>{let{config:t}=e;return(0,r.D)({onSuccess:()=>{i.E.invalidateQueries({queryKey:["mfa-by-customer"]})},...t,mutationFn:h})}},90896:function(e,t,n){"use strict";n.d(t,{p:function(){return o}});var s=n(59910),i=n(53742),r=n(2265);let a=(0,s.cn)({isShowing:!1,type:"default",message:"",delay:10}),o=()=>{let[e,t]=(0,i.KO)(a),n=(0,r.useCallback)(e=>{let{message:n,type:s,delay:i}=e;t({message:n,type:s,isShowing:!0,delay:i})},[t]),s=(0,r.useCallback)(()=>{t({...e,isShowing:!1})},[e,t]);return(0,r.useMemo)(()=>({...e,show:n,hide:s}),[e,s,n])}},54899:function(e,t,n){"use strict";n.d(t,{Xf:function(){return s}});let s=n(73208).Z.create({baseURL:"".concat("".concat("https://backoffice-prod-dycyrhjbkq-rj.a.run.app","/v1/")),headers:{Accept:"application/json","Access-Control-Allow-Origin":"*"}});s.interceptors.request.use(e=>{var t;let n=null===(t=localStorage)||void 0===t?void 0:t.getItem("token");return e.headers&&(n&&(e.headers.Authorization="Bearer ".concat(n)),window&&(e.headers["x-request-id"]=window.crypto.randomUUID())),e}),s.interceptors.response.use(e=>e,e=>(console.error(e),(e.response&&401===e.response.status||e.config&&e.config.url.includes("auth/signin"))&&"/login"!==window.location.pathname&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e))),t.ZP=s},78584:function(e,t,n){"use strict";n.d(t,{E:function(){return s}});let s=new(n(43151)).S({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:!1}}})},60001:function(e,t,n){"use strict";n.d(t,{B:function(){return s}});let s=(e,t)=>"ADMIN"===e.role||"FGTS"===t},35260:function(e,t,n){"use strict";n.d(t,{S:function(){return l}});var s=n(57437),i=n(2265),r=n(93191),a=n(78584),o=n(53742);let l=(0,i.createContext)({user:void 0,setUser:()=>{}});t.Z=function(e){let{children:t}=e,[n,u]=(0,i.useState)();return(0,i.useEffect)(()=>{let e=localStorage.getItem("user");u(e?JSON.parse(e):void 0)},[]),(0,s.jsx)(r.aH,{client:a.E,children:(0,s.jsx)(o.zt,{children:(0,s.jsx)(l.Provider,{value:{user:n,setUser:u},children:t})})})}},56889:function(e,t,n){"use strict";n.d(t,{O:function(){return i},S:function(){return s}});let s=e=>e.split(" ")[0],i=e=>{switch(e){case"ADMIN":return"Admin";case"MASTER":return"Master";case"MANAGER":return"Gerente de Contas";case"VIEWER":return"Visualizador";default:return"Digitador"}}},32532:function(){},78031:function(){},74933:function(){},98432:function(){},85999:function(){},25524:function(e,t,n){"use strict";n.d(t,{D:function(){return d}});var s=n(2265),i=n(92812),r=n(69948),a=n(49010),o=n(56298),l=class extends a.l{constructor(e,t){super(),this.#e=void 0,this.#t=e,this.setOptions(t),this.bindMethods(),this.#n()}#t;#e;#s;#i;bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#t.defaultMutationOptions(e),(0,o.VS)(t,this.options)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),this.#s?.setOptions(this.options),t?.mutationKey&&this.options.mutationKey&&(0,o.Ym)(t.mutationKey)!==(0,o.Ym)(this.options.mutationKey)&&this.reset()}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#n(),this.#r(e)}getCurrentResult(){return this.#e}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#n(),this.#r()}mutate(e,t){return this.#i=t,this.#s?.removeObserver(this),this.#s=this.#t.getMutationCache().build(this.#t,this.options),this.#s.addObserver(this),this.#s.execute(e)}#n(){let e=this.#s?.state??(0,i.R)();this.#e={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#r(e){r.V.batch(()=>{if(this.#i&&this.hasListeners()){let t=this.#e.variables,n=this.#e.context;e?.type==="success"?(this.#i.onSuccess?.(e.data,t,n),this.#i.onSettled?.(e.data,null,t,n)):e?.type==="error"&&(this.#i.onError?.(e.error,t,n),this.#i.onSettled?.(void 0,e.error,t,n))}this.listeners.forEach(e=>{e(this.#e)})})}},u=n(93191),c=n(37832);function d(e,t){let n=(0,u.NL)(t),[i]=s.useState(()=>new l(n,e));s.useEffect(()=>{i.setOptions(e)},[i,e]);let a=s.useSyncExternalStore(s.useCallback(e=>i.subscribe(r.V.batchCalls(e)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),o=s.useCallback((e,t)=>{i.mutate(e,t).catch(m)},[i]);if(a.error&&(0,c.L)(i.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:o,mutateAsync:a.mutate}}function m(){}}},function(e){e.O(0,[4190,811,4889,4211,932,3742,7138,2971,7023,1744],function(){return e(e.s=87165)}),_N_E=e.O()}]);